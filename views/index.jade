html
	head
		link(rel='shortcut icon', href='/favicon.ico', type='image/x-icon')
		link(rel='icon', href='/favicon.ico', type='image/x-icon')
		link(rel='stylesheet', href='/vendor/bootstrap.min.css')
		link(rel='stylesheet', href='/stylesheets/editor.css')
		link(rel='stylesheet', href='/vendor/loading-bar.css')
		title=title
	body(ng-app='roadglApp')
		div(ng-controller='AppCtrl', ng-trackinfo='#{JSON.stringify(trackInfo)}', ng-editor=editor)
			canvas#road
				canvas
			#wrap
				#left-top
					#title.tab
						h4 {{trackInfo.track}}
					.tab
						button#laneEditor.actionBtn(ng-show="editor == 'tag'", ng-click="changeEditor()", type="button")
							|Lane Editor
						button#laneEditor.actionBtn(ng-show="editor == 'lane'", ng-click="changeEditor()", type="button")
							|Tag Editor
					.tab
						button.infoBtn(data-toggle='collapse', ng-model="collapsed", ng-click="collapsed=!collapsed")
							| Learn shortcuts
							div(ng-show='collapsed')
								ul
									li	Ctrl+mouse to look
									li	Play/Pause with Spacebar
									li	Move car with arrows
									span(ng-show="editor == 'lane'")
										li  'f' to fork
										li  'a' to append
										li  'j' to join
										li  'd' to delete
										li  'c' to copy
										li  'esc' to be done with fork/append
										li  Select point, then shift+click to select segment
										li  Double click point to select entire lane
					#videoPlayer
						canvas#projectionCanvas
					#slideDiv.tab
						div(ng-show="editor == 'lane'")
							h4 Drag range
							input#drrange(type="range", min="1", max="60", value="15", step="5", ng-model="dragRange")
						h4 Play speed
						input#playspeedrange(type="range", min="1", max="5", value="1", step="1")
				#left-bottom
					#fps.tab
				#center-top
					#log.tab
						p#logText {{logText}}
				#center-bottom
					div(ng-show="editor == 'lane'")
						#actions.tab
							button#undo.actionBtn(ng-click="laneEditor.undo()", type="button")
								|Undo
							button#redo.actionBtn(ng-click="laneEditor.redo()", type="button")
								|Redo
							button#save.actionBtn(ng-click="laneEditor.save()", type="button")
								|Save
					#scrubberDiv.tab
						input#scrubber(type="range", min="0", max="{{gps.length}}", step="1", ng-model="frameCount")
						div(ng-show="editor == 'tag'")
							#tagScrubbers(ng-show="tagEditor.vars.showForm == 'tag'")
								input.scrubberMarker.scrubberLeft(type="range", min="0", max="{{gps.length}}", step="1", ng-model="tagEditor.vars.tagLeftVal", ng-change="tagEditor.tagLeft()")
								input.scrubberMarker.scrubberRight(type="range", min="0", max="{{gps.length}}", step="1", ng-model="tagEditor.vars.tagRightVal", ng-change="tagEditor.tagRight()")
							div(ng-repeat="tag in tagEditor.vars.tags")
								.scrubberTag(ng-style="tag.style")
									.scrubberTagPopup(ng-style="tag.popupStyle", data-id="{{tag._id}}")
										button(ng-click="tagEditor.tagDelete(tag)", type="button")
											|Delete
										p Start Frame: {{tag.startFrame}}
										p End Frame: {{tag.endFrame}}
										p {{tag.category.name}}
										p {{tag.category.description}}
				#right-side
					.tab
						p#carDetectionPrecisionTitle
							h5#carDetectionPrecisionField
						p#carDetectionRecallTitle
							h5#carDetectionRecallField
					#options.tab(ng-show="editor == 'lane'")
						div
							button#fork.actionBtn(type="button", ng-click="laneEditor.fork()", ng-show="laneEditor.showButton.fork")
								|Fork
						div
							button#append.actionBtn(type="button", ng-click="laneEditor.append()", ng-show="laneEditor.showButton.append")
								|Append
						div
							button#join.actionBtn(type="button", ng-click="laneEditor.join()", ng-show="laneEditor.showButton.join")
								|Join
						div
							button#copy.actionBtn(type="button", ng-click="laneEditor.copy()", ng-show="laneEditor.showButton.copy")
								|Copy
						div
							button#delete.actionBtn(type="button", ng-click="laneEditor.delete()", ng-show="laneEditor.showButton.delete")
								|Delete
					.tab(ng-show="editor == 'tag'")
						div
							button#addCategory.actionBtn(type="button", ng-click="tagEditor.toggleAddCategory()")
								| Add Category
							button#addTag.actionBtn(type="button", ng-click="tagEditor.toggleAddTag()")
								| Add Tag
					#categoryContent.tab.ng-hide
						form#categoryForm
							.form-group
								label(for="name")
									| Category Name
								input.form-control.category-input(type="text", name="name", required)
							.form-group
								label(for="description")
									| Description
								input.form-control.category-input(type="text", name="description")
							.form-group
								label(for="diplayColor")
									| Display Color
								input.form-control.category-input.color(type="text", name="displayColor")
							.form-group
								button.actionBtn#categorySubmit.btn.btn-default(type="submit")
									| Submit
					#tagContent.tab.ng-hide
						form#tagForm
							input(type="hidden", name="runTrack", value="#{trackInfo.track}")
							input(type="hidden", name="lanesFilename", value="#{trackInfo.lanesFilename}")
							.form-group
								label(for="categoryId")
									| Category
									select#categorySelector.form-control(name="categoryId")
										-each category in categories
											option(value="#{category._id}") #{category.name}
							input#run(type="hidden", name="run", value="#{track}")
							.form-group
								label(for="startFrame")
									| Start Frame
								input#startFrameInput.tag-input.form-control(type="text", name="startFrame", required)
							.form-group
								label(for="endFrame")
									| End Frame
								input#endFrameInput.tag-input.form-control(type="text", name="endFrame", required)
							.form-group
								label(for="description")
									| Description
								input.tag-input.form-control(type="text", name="description")
							.form-group
								button.actionBtn#tagSubmit.btn.btn-default(type="submit")
									| Submit
				#videoPlayerWrap
		script(src='/vendor/jquery.js')
		script(src='/vendor/bootstrap.min.js')
		script(src="/vendor/angular.js")
		script(src='/javascripts/angular-animate.min.js')
		script(src='/vendor/loading-bar.js')
		script(src='/javascripts/three.min.js')
		script(src='/javascripts/OrbitControls.js')
		script(src='/javascripts/TypedArrayUtils.js')
		script(src='/javascripts/BinaryLoader.js')
		script(src='/javascripts/async.js')
		script(src='/javascripts/fpsmeter.js')
		script(src='/javascripts/jscolor.js')
		script(src='/javascripts/jszip.js')
		script(src='/javascripts/jszip-utils.js')
		script(src='/javascripts/numeric-1.2.6.js')
		script(src='/javascripts/jpeg_encoder_basic.js')
		script(src='/javascripts/jsmpg.js')
		script(src='/app.js')
		script(src='/laneEditor.js')
		script(src='/tagEditor.js')
		script(src='/loading.js')
		script(src='/util.js')
		script(src='/video_nacl.js')
		script(src='/videoProjection.js')
		script(src='/radar.js')
		script(src='/carDetection.js')
		script(src='/laneDetection.js')
